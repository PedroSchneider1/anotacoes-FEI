# ARP - Address Resolution Protocol
**RFC 826**
Os serviços e aplicações se comunicam por meio dos endereços IP.
Suponha que o equipamento A deseja se comunicar com o B.

![[switch.png]]

| IP ORIGEM      | IP DESTINO      | Camada 3     |
| -------------- | --------------- | ------------ |
| **MAC ORIGEM** | **MAC DESTINO** | **Camada 2** |

| IP A  | IP B  | Camada 3     |
| ----- | ----- | ------------ |
| MAC A | MAC B | **Camada 2** |
**A** conhece o IP de **B**, mas ...
**A** conhece o MAC de **B** ?
Como A poderia obter o MAC de B ?

>Como determinar endereço MAC de B sabendo o endereço IP de B?

Através do **Protocolo ARP**
Cada nó IP *(hosp., roteador)* na LAN tem tabela ARP
- Tabela **ARP**: mapeamentos de endereço IP/MAC para nós da LAN ***<endereço IP; endereço MAC; TTL>***
	- **TTL** (Time To Live): tempo após o qual o mapeamento de endereço será esquecido (normalmente, 20 min)
## Protocolo ARP em MESMA LAN
![[sameLANarp.png]]
![[exARP.png]]
## Protocolo ARP em OUTRA LAN
![[otherLANarp.png]]![[exARP2.png]]

>**Gateway padrão**: ou roteador de borda, fica no limite da rede e conecta com as redes de fora

Quando a conexão está em outra LAN, a máquina procura esse gateway padrão e ele se conecta com o destino e não diretamente com a outra máquina. Ou seja, a máquina A nunca saberá o MAC da máquina B.

# Redes Locais Virtuais (VLANs)
VLANs permitem o agrupamento lógico de estações finais que estão fisicamente dispersas em uma rede.
- Facilidade de administração
- Confinamento de domínios de broadcast
- Tráfego de broadcast reduzido
- Aplicação de políticas de segurança

![[VLAN.png]]

Um comutador que suporta VLANs permite que diversas redes locais virtuais sejam executadas por meio de uma **única infraestrutura física** de uma rede local virtual.

![[comutadorVLAN.png]]

## Conexão de comutadores
>Conectando 2 comutadores da VLAN a duas VLANs: cabos
![[comutadoresCabos.png]]

>Conectando 2 comutadores da VLAN a duas VLANs: entroncados
![[comutadoresEntrocados.png]]
 **Usuários**: *Porta Access*
 Portas para **conexão de VLANs** em Switches diferentes: *Porta Trunk*

## Comunicação entre VLANs distintas
>Quadro **Ethernet original** (no alto); quadro **VLAN Ethernet 802.1Q-tagged** (embaixo);
![[ethernetXvlan.png]]

Deve ser implementado um processo de roteamento
- Através de um roteador conectado entre as VLANs
- Utilizando **Switch L3** (nível 3) que possui capacidade de roteamento (funções básicas)
![[switchL3.png]]

# STP - Spanning Tree Protocol
É um protocolo usado por switches para evitar *loops* na rede. É comum em redes, especialmente grandes, criar um loop no qual uma mesma entrada possui dois caminhos diferentes para seguir.
![[STPex.png]]
>Nesse caso, o Switch A tem tanto o caminho 1 quanto o 2 para chegar ao Switch C. A função do **STP** é justamente bloquear um desses caminhos logicamente.

